import React from 'react';
import { connect } from 'dva';
import { Link } from 'dva/router';
import { Menu, Icon, Button } from 'antd';
import styled from '@/assets/Home/LeftAside.less';

const SubMenu = Menu.SubMenu;

const userInfo = () => {
  return (
    <ul>
      <li><Link to="/userOption">个人选项</Link></li>
      <li>注销</li>
    </ul>
  );
} 

const AsideTop = ({onClick,type}) => {
  return (
    <div>
      <figure className={styled.asideTop} >
        <Icon type="smile" style={{color: '#58A3D2', fontSize: '54px'}} />
        <figcaption>
          这里是个变量 <Icon type="caret-down" style={{color: '#8095A8'}} />
        </figcaption>
      </figure>
      <Button className={styled.navShrink} type="primary" onClick={onClick} >
        <Icon type={type} />
      </Button>
    </div>
  );
};
const listApi = {
  success: true,
  content: [
    {
      val: '首页',
      icon: 'area-chart'
    },
    {
      val: '销售',
      icon: 'pie-chart',
      children: [
        {
          val: '销售一',
          icon: 'bar-chart'
        },
        {
          val: '销售二',
          icon: 'dot-chart'
        },
        {
          val: '销售三',
          icon: 'bars'
        },
      ]
    },
    {
      val: '服务支持',
      icon: 'book',
      children: [
        {
          val: '服务支持一',
          icon: 'edit',
          children: [
            {
              val: '服务支持一一',
              icon: 'ellipsis'
            },
            {
              val: '服务支持二二',
              icon: 'smile-o'
            },
            {
              val: '服务支持三三',
              icon: 'mobile'
            },
          ]
        },
        {
          val: '服务支持二',
          icon: 'setting'
        },
        {
          val: '服务支持三',
          icon: 'share-alt'
        },
        {
          val: '服务支持四',
          icon: 'shopping-cart'
        },
      ]
    },
    {
      val: '分析',
      icon: 'cloud-download'
    },
    {
      val: '市场营销',
      icon: 'calendar'
    },
    {
      val: '运营',
      icon: 'cloud'
    },
    {
      val: '工具',
      icon: 'code'
    },
    {
      val: 'cutOff',
      icon: 'desktop'
    },
    {
      val: '企业协同',
      icon: 'credit-card'
    },
    {
      val: '回收站',
      icon: 'delete'
    }
  ]
};
const ListBox = ({api}) => {
    const list = (listData) => {
      return listData.map((val,i) => {
        if(val.val === 'cutOff'){
          return (<Menu.Divider className={styled.dividingLine} />);
        };
        let c = '';
        if(val.children){
          c = list(val.children);
        };
        if(c){
          return (<SubMenu key={val.val} title={(<span><Icon type={val.icon} /><span>{val.val}</span></span>)} >{c}</SubMenu>);
        }else{
          return (<Menu.Item key={val.val}><Icon type={val.icon}/> <span>{val.val}</span></Menu.Item>);
        };
      });
    }
    return (
    <Menu
      className={styled.list}
      defaultSelectedKeys={['1']}
      // defaultOpenKeys={['sub1']}
      mode="vertical"
      theme="dark"
      // inlineCollapsed={this.state.collapsed}
    >
    {list(listApi.content)}
    </Menu>
  );
}

class LeftAside extends React.Component {
  state = {
    collapsed: false,
    listWidth: styled.bigAside
  }
  toggleCollapsed = () => {
    this.setState({
      collapsed: !this.state.collapsed,
      listWidth: this.state.collapsed ? styled.bigAside : styled.smallAside
    });
  }
  render() {
    return (
      <div className={`${styled.leftAside} ${this.state.listWidth}`} >
        <AsideTop type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'} onClick={this.toggleCollapsed} />
        <ListBox />
      </div>
    );
  }
}

export default connect()(LeftAside);